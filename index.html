<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
  body { font-family: 'Poppins', sans-serif; background-color: #1a1424; color: white; scroll-behavior: smooth; }
  .btn { background-color: #D4AF37; color: black; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 600; transition: all 0.2s; cursor: pointer; display: inline-block; text-align: center; }
  .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px #D4AF37; }
  .video-slide { max-width: 100%; border-radius: 0.5rem; box-shadow: 0 0 20px #000; }
  .discount-badge { background-color: #ff4d6d; color: white; padding: 0.2rem 0.5rem; font-size: 0.8rem; border-radius: 0.3rem; margin-left: 0.5rem; }
  .faq-question { font-weight: bold; margin-top: 1rem; }
  .footer-links a { color: #D4AF37; text-decoration: underline; }
</style>
</head>
<body>
<!-- ðŸ§¾ Payment Modals -->
<div id="paymentModal" class="fixed inset-0 bg-black/60 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-2xl shadow-2xl w-80 p-6 text-center relative">
    <button id="closePaymentModal" class="absolute top-2 right-3 text-gray-500 hover:text-gray-700 text-xl font-bold">&times;</button>
    
    <!-- Dynamic Plan Display -->
    <h3 id="modalPlanName" class="text-2xl font-bold text-[#3D2C41] mb-1">Plan Name</h3>
    <p id="modalPlanPrice" class="text-lg font-semibold text-gray-700 mb-4">$0 â€” Full Access</p>

    <!-- PayPal (dynamic link) -->
    <a id="paypalLink" href="#" target="_blank"
       class="w-full flex items-center justify-center gap-2 bg-[#003087] hover:bg-[#002060] text-white font-semibold py-2 rounded-lg text-sm transition mb-3">
       <img src="https://upload.wikimedia.org/wikipedia/commons/3/39/PayPal_logo.svg" class="h-4" alt="PayPal">
       <span>Pay with PayPal</span>
    </a>

    <!-- Stripe Buy Button (dynamic ID) -->
    <stripe-buy-button
      id="stripeButton"
      class="mb-3"
      publishable-key="pk_live_51RoZXfH4iReDKpeMdW1C6mtNpEb6dXi2zzQmcO1BSI1j4sWdSkwlD0K2Q4Uu4Go3amDsrzRNYgosya2sp3K7c8nS00D0kNVJDF"
    ></stripe-buy-button>

    <!-- Paystack (dynamic link) -->
    <a id="paystackLink" href="#" target="_blank"
       class="w-full flex items-center justify-center gap-2 bg-[#3DA58A] hover:bg-[#2f8a74] text-white font-semibold py-2 rounded-lg text-sm transition mb-3">
       <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Paystack_logo.png" class="h-4" alt="Paystack">
       <span>Pay with Paystack</span>
    </a>

    <!-- M-PESA -->
    <button id="mpesaButton"
      class="w-full flex items-center justify-center gap-2 bg-[#FFA500] hover:bg-[#e69500] text-white font-semibold py-2 rounded-lg text-sm transition">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/88/M-Pesa_Logo.svg" class="h-4" alt="M-PESA">
      <span>Pay with M-PESA</span>
    </button>
  </div>
</div>

<script>
  // Modal
  const modal = document.getElementById("paymentModal");
  const closeModalBtn = document.getElementById("closePaymentModal");
  const modalPlanName = document.getElementById("modalPlanName");
  const modalPlanPrice = document.getElementById("modalPlanPrice");
  const paypalLink = document.getElementById("paypalLink");
  const stripeButton = document.getElementById("stripeButton");
  const paystackLink = document.getElementById("paystackLink");
  const mpesaButton = document.getElementById("mpesaButton");

  // Plan configurations
  const plans = {
    entry: {
      name: "Entry Plan",
      price: "$19",
      paypal: "https://www.paypal.com/ncp/payment/2X583XDXBYUPN",
      stripe: "buy_btn_1SVATkH4iReDKpeMvZw5AKr0",
      paystack: "https://paystack.shop/pay/ge2324r8fu",
      mpesaAmount: 19
    },
    pro: {
      name: "Pro Plan",
      price: "$49",
      paypal: "https://www.paypal.com/ncp/payment/DVSZY7GB2QCYW",
      stripe: "buy_btn_1SVAbIH4iReDKpeM3dbtoiVN",
      paystack: "https://paystack.shop/pay/uli4nrj8xq",
      mpesaAmount: 49
    },
    diamond: {
      name: "Diamond Plan",
      price: "$449",
      paypal: "https://www.paypal.com/ncp/payment/DVSZY7GB2QCYW",
      stripe: "buy_btn_1SVApvH4iReDKpeM191MsBAz",
      paystack: "https://paystack.shop/pay/4u6jdu7eft",
      mpesaAmount: 449
    },
    lifetime: {
      name: "Lifetime Plan",
      price: "$999",
      paypal: "https://www.paypal.com/ncp/payment/K4Y9SVNW76XY",
      stripe: "buy_btn_1SVAdaH4iReDKpeMZZnaOxr6",
      paystack: "https://paystack.shop/pay/-cdm6oobkz",
      mpesaAmount: 999
    }
  };

  // Open modal and update dynamic info
  function openModal(planKey) {
    const plan = plans[planKey];
    modalPlanName.textContent = plan.name;
    modalPlanPrice.textContent = `${plan.price} â€” Full Access`;
    paypalLink.href = plan.paypal;
    stripeButton.setAttribute("buy-button-id", plan.stripe);
    paystackLink.href = plan.paystack;
    mpesaButton.onclick = () => alert(`ðŸ“² Send Ksh equivalent of ${plan.price} to 0113554446 via M-PESA, then confirm on WhatsApp.`);
    modal.classList.remove("hidden");
  }

  // Attach open buttons
  document.getElementById("openEntryPayModal").onclick = () => openModal("entry");
  document.getElementById("openProPayModal").onclick = () => openModal("pro");
  document.getElementById("openDiamondPayModal").onclick = () => openModal("diamond");
  document.getElementById("openLifetimePayModal").onclick = () => openModal("lifetime");

  // Close modal
  closeModalBtn.onclick = () => modal.classList.add("hidden");
  modal.addEventListener("click", (e) => { if (e.target === modal) modal.classList.add("hidden"); });
</script>
